/**
 * famous-angular - Bring structure to your Famo.us apps with the power of AngularJS. Famo.us/Angular integrates seamlessly with existing Angular and Famo.us apps.
 * @version v0.5.0
 * @link https://github.com/Famous/famous-angular
 * @license MPL v2.0
 */
"use strict";var ngFameApp=angular.module("famous.angular",[]);ngFameApp.provider("$famous",function(){var e={"famous/core/Context":famous.core.Context,"famous/core/ElementAllocator":famous.core.ElementAllocator,"famous/core/Engine":famous.core.Engine,"famous/core/Entity":famous.core.Entity,"famous/core/EventEmitter":famous.core.EventEmitter,"famous/core/EventHandler":famous.core.EventHandler,"famous/core/Group":famous.core.Group,"famous/core/Modifier":famous.core.Modifier,"famous/core/OptionsManager":famous.core.OptionsManager,"famous/core/RenderNode":famous.core.RenderNode,"famous/core/Scene":famous.core.Scene,"famous/core/SpecParser":famous.core.SpecParser,"famous/core/Surface":famous.core.Surface,"famous/core/Transform":famous.core.Transform,"famous/core/View":famous.core.View,"famous/core/ViewSequence":famous.core.ViewSequence,"famous/events/EventArbiter":famous.events.EventArbiter,"famous/events/EventFilter":famous.events.EventFilter,"famous/events/EventMapper":famous.events.EventMapper,"famous/inputs/FastClick":famous.inputs.FastClick,"famous/inputs/GenericSync":famous.inputs.GenericSync,"famous/inputs/MouseSync":famous.inputs.MouseSync,"famous/inputs/PinchSync":famous.inputs.PinchSync,"famous/inputs/RotateSync":famous.inputs.RotateSync,"famous/inputs/ScaleSync":famous.inputs.ScaleSync,"famous/inputs/ScrollSync":famous.inputs.ScrollSync,"famous/inputs/TouchSync":famous.inputs.TouchSync,"famous/inputs/TouchTracker":famous.inputs.TouchTracker,"famous/inputs/TwoFingerSync":famous.inputs.TwoFingerSync,"famous/math/Matrix":famous.math.Matrix,"famous/math/Quaternion":famous.math.Quaternion,"famous/math/Random":famous.math.Random,"famous/math/Utilities":famous.math.Utilities,"famous/math/Vector":famous.math.Vector,"famous/modifiers/Draggable":famous.modifiers.Draggable,"famous/modifiers/Fader":famous.modifiers.Fader,"famous/modifiers/ModifierChain":famous.modifiers.ModifierChain,"famous/modifiers/StateModifier":famous.modifiers.StateModifier,"famous/surfaces/CanvasSurface":famous.surfaces.CanvasSurface,"famous/surfaces/ContainerSurface":famous.surfaces.ContainerSurface,"famous/surfaces/FormContainerSurface":famous.surfaces.FormContainerSurface,"famous/surfaces/ImageSurface":famous.surfaces.ImageSurface,"famous/surfaces/InputSurface":famous.surfaces.InputSurface,"famous/surfaces/SubmitInputSurface":famous.surfaces.SubmitInputSurface,"famous/surfaces/TextareaSurface":famous.surfaces.TextareaSurface,"famous/surfaces/VideoSurface":famous.surfaces.VideoSurface,"famous/transitions/CachedMap":famous.transitions.CachedMap,"famous/transitions/Easing":famous.transitions.Easing,"famous/transitions/MultipleTransition":famous.transitions.MultipleTransition,"famous/transitions/SnapTransition":famous.transitions.SnapTransition,"famous/transitions/SpringTransition":famous.transitions.SpringTransition,"famous/transitions/Transitionable":famous.transitions.Transitionable,"famous/transitions/TransitionableTransform":famous.transitions.TransitionableTransform,"famous/transitions/TweenTransition":famous.transitions.TweenTransition,"famous/transitions/WallTransition":famous.transitions.WallTransition,"famous/utilities/KeyCodes":famous.utilities.KeyCodes,"famous/utilities/Timer":famous.utilities.Timer,"famous/utilities/Utility":famous.utilities.Utility,"famous/views/Deck":famous.views.Deck,"famous/views/EdgeSwapper":famous.views.EdgeSwapper,"famous/views/FlexibleLayout":famous.views.FlexibleLayout,"famous/views/Flipper":famous.views.Flipper,"famous/views/GridLayout":famous.views.GridLayout,"famous/views/HeaderFooterLayout":famous.views.HeaderFooterLayout,"famous/views/Lightbox":famous.views.Lightbox,"famous/views/RenderController":famous.views.RenderController,"famous/views/ScrollContainer":famous.views.ScrollContainer,"famous/views/Scroller":famous.views.Scroller,"famous/views/Scrollview":famous.views.Scrollview,"famous/views/SequentialLayout":famous.views.SequentialLayout,"famous/widgets/NavigationBar":famous.widgets.NavigationBar,"famous/widgets/Slider":famous.widgets.Slider,"famous/widgets/TabBar":famous.widgets.TabBar,"famous/widgets/ToggleButton":famous.widgets.ToggleButton,"famous/physics/PhysicsEngine":famous.physics.PhysicsEngine,"famous/physics/bodies/Body":famous.physics.bodies.Body,"famous/physics/bodies/Circle":famous.physics.bodies.Circle,"famous/physics/bodies/Particle":famous.physics.bodies.Particle,"famous/physics/bodies/Rectangle":famous.physics.bodies.Rectangle,"famous/physics/constraints/Collision":famous.physics.constraints.Collision,"famous/physics/constraints/Constraint":famous.physics.constraints.Constraint,"famous/physics/constraints/Curve":famous.physics.constraints.Curve,"famous/physics/constraints/Distance":famous.physics.constraints.Distance,"famous/physics/constraints/Snap":famous.physics.constraints.Snap,"famous/physics/constraints/Surface":famous.physics.constraints.Surface,"famous/physics/constraints/Wall":famous.physics.constraints.Wall,"famous/physics/constraints/Walls":famous.physics.constraints.Walls,"famous/physics/forces/Drag":famous.physics.forces.Drag,"famous/physics/forces/Force":famous.physics.forces.Force,"famous/physics/forces/Repulsion":famous.physics.forces.Repulsion,"famous/physics/forces/RotationalDrag":famous.physics.forces.RotationalDrag,"famous/physics/forces/RotationalSpring":famous.physics.forces.RotationalSpring,"famous/physics/forces/Spring":famous.physics.forces.Spring,"famous/physics/forces/VectorField":famous.physics.forces.VectorField,"famous/physics/integrators/SymplecticEuler":famous.physics.integrators.SymplecticEuler};this.registerModule=function(n,r){e[n]=r},e.getIsolate=function(e){return e&&"isolate"in e?e.isolate[e.$id]:{}},e.find=function(n){var r=angular.element(window.document.querySelectorAll(n)),o=function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=angular.element(e).scope()}),n}(r),a=function(n){var r=[];return angular.forEach(n,function(n,o){r[o]=e.getIsolate(n)}),r}(o);return a};var n=/([\:\-\_]+(.))/g,r=/^moz([A-Z])/,o=/^(x[\:\-_]|data[\:\-_])/i,a=/^FA\-.*SURFACE/,t=/^FA\-.*/;window.$famousUtil=e.util={isASurface:function(e){return e[0]?a.test(e[0].tagName):!1},isFaElement:function(e){if(!e[0])return!1;if(t.test(e[0].tagName))return!0;var n=!1;return angular.forEach(e[0].attributes,function(e){n=n||t.test(e)}),n},camelCase:function(e){return e.replace(n,function(e,n,r,o){return o?r.toUpperCase():r}).replace(r,"Moz$1")},directiveNormalize:function(n){return e.util.camelCase(n.replace(o,""))}},this.$get=function(){return e}}),angular.module("famous.angular").config(["$provide",function(e){e.decorator("$animate",["$delegate","$rootScope","$famous","$parse","$famousDecorator","$q",function(e,n,r,o,a,t){var i=r["famous/utilities/Timer"],s="$$faAnimationActive",u={},c=function(e){var n=r.getIsolate(e);return!n&&e&&(n=a.$$getIsolateById(u[e.$id])),n},f={enabled:e.enabled,$$removeClassImmediately:e.$$removeClassImmediately,$$addClassImmediately:e.$$addClassImmediately,$$setClassImmediately:e.$$setClassImmediately};return angular.forEach(["addClass","removeClass"],function(n){var o=angular.element.prototype[n];angular.element.prototype[n]=function(e){return o.apply(this,arguments),r.util.isASurface(this)&&"string"==typeof e&&""!==e.trim()&&c(this.scope()).renderNode[n](e),this},f[n]=function(o,a,t){if(e[n](o,a,t),r.util.isFaElement(o)){var i=c(o.scope());if(r.util.isASurface(o)){var s=i.renderNode;angular.forEach(a.split(" "),function(e){"ng-hide"===e?"addClass"===n?i.hide():"removeClass"===n&&i.show():s[n](e)})}else angular.forEach(a.split(" "),function(e){"ng-hide"===e&&("addClass"===n?i.hide():"removeClass"===n&&i.show())})}}}),f.setClass=function(n,o,a,t){if(e.setClass(n,o,a,t),r.util.isASurface(n)){var i=c(n.scope()).renderNode;angular.forEach(o.split(" "),function(e){i.addClass(e)}),angular.forEach(a.split(" "),function(e){i.removeClass(e)})}},angular.forEach(["enter","leave","move"],function(o){var a=o[0].toUpperCase()+o.slice(1);f[o]=function(f){var l,d=this,m=arguments,p="enter"===o,v=f.scope();v&&v.$parent&&(u[v.$id]=v.$parent.$id);var g=c(v);if(p===!0)l=e[o].apply(this,arguments);else{var h=t.defer();i.setTimeout(function(){h.resolve()},0),l=h.promise}f.data(s)===!0&&g&&g.$$animateHaltHandler&&g.$$animateHaltHandler(f.scope()),f.data(s,!0);var $=function(){v&&v.$id;if("leave"===o&&r.util.isFaElement(f)){var n=c(v);n&&n.id&&n.hide()}f.data(s)!==!1&&(f.data(s,!1),p===!1&&e[o].apply(d,m))};return n.$$postDigest(function(){var e,n=f.scope(),r=c(n);if(r&&(e=r["$$animate"+a+"Handler"]),void 0===e)return void $();var o=e(n,{$done:$});"number"==typeof o&&i.setTimeout($,o)}),l}}),f}])}]),angular.module("famous.angular").factory("$famousDecorator",["$famous",function(e){var n={child:{},parent:{},renderable:function(n){var r=e["famous/core/RenderNode"];n.renderGate=new r,n.emptyNode=new r,n.show=function(){n.renderGate&&n.renderGate.set(n.renderNode)},n.hide=function(){n.renderGate.set(n.emptyNode)}}},r={};return{addRole:function(e,r){n[e](r)},ensureIsolate:function(e,n){if(n){var o=["fa-edge-swapper","fa-render-controller","fa-deck","fa-light-box"],a=!1;angular.forEach(o,function(e){return e.toUpperCase()===n[0].tagName?void(a=!0):void 0!==n[0].attributes[e]?void(a=!0):void 0}),a&&(e=e.$parent)}e.isolate=e.isolate||{},e.isolate[e.$id]=e.isolate[e.$id]||{};var t=e.isolate[e.$id];t.id=e.$id;var i=e.$eval("$index");return i&&"$index"!==i&&!t.index&&(t.index=i),r[t.id]=t,t},$$getIsolateById:function(e){return r[e]},registerChild:function(e,n,r,o){e.$emit("registerChild",r),n.one("$destroy",function(){"removeMethod"in r&&r.removeMethod(r.id),r&&r.hide&&r.hide(),o&&o()})},sequenceWith:function(n,r,o,a){n.$on("registerChild",function(t,i){if(t.targetScope.$id!==n.$id){var s=e.getIsolate(n);i.$parent=s,s.$children=s.$children||[],s.$children.push(i),r(i),t.stopPropagation(),o&&(i.removeMethod=o),a&&(i.updateMethod=a)}})}}}]),angular.module("famous.angular").service("$famousPipe",function(){function e(e,n,r){e instanceof Array||(e=[e]),n instanceof Array||(n=[n]);for(var o=0;o<e.length;o++)for(var a=0;a<n.length;a++)void 0!==n[a]&&void 0!==e[o]&&(n[a]._isModifier?n[a]._object[r](e[o]):n[a][r](e[o]))}this.unpipesFromTargets=function(n,r){e(n,r,"unpipe")},this.pipesToTargets=function(n,r){e(n,r,"pipe")}}),angular.module("famous.angular").factory("$timeline",function(){var e=function(e,n){return"number"==typeof e?e+n:e.map(function(e,r){return e+n[r]})},n=function(e,n){return"number"==typeof e?e-n:e.map(function(e,r){return e-n[r]})},r=function(e,n){return"number"==typeof e?e*n:e.map(function(e){return e*n})},o=function(o,a,t,i,s){return function(u){var c=i,f=-a,l=1/(t-a),d=n(s,i);return e(r(d,o(l*(u+f))),c)}};return function(e){var n=function(e){return e};return function(r){if(r<e[0][0])return e[0][1];for(var a=0;a<e.length-1;a++)if(e[a][0]<=r&&r<e[a+1][0]){var t=o(e[a][2]||n,e[a][0],e[a+1][0],e[a][1],e[a+1][1]);return t(r)}return e[e.length-1][1]}}}),angular.module("famous.angular").directive("faAnimateEnter",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);t.$$animateEnterHandler=e(a.faAnimateEnter),a.$observe("faAnimateEnter",function(){t.$$animateEnterHandler=e(a.faAnimateEnter)})}}}}}]),angular.module("famous.angular").directive("faAnimateHalt",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);t.$$animateHaltHandler=e(a.faAnimateHalt),a.$observe("faAnimateHalt",function(){t.$$animateHaltHandler=e(a.faAnimateHalt)})}}}}}]),angular.module("famous.angular").directive("faAnimateLeave",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);t.$$animateLeaveHandler=e(a.faAnimateLeave),a.$observe("faAnimateLeave",function(){t.$$animateLeaveHandler=e(a.faAnimateLeave)})}}}}}]),angular.module("famous.angular").directive("faAnimateMove",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);t.$$animateMoveHandler=e(a.faAnimateMove),a.$observe("faAnimateMove",function(){t.$$animateMoveHandler=e(a.faAnimateMove)})}}}}}]),angular.module("famous.angular").directive("faAnimation",["$famous","$famousDecorator",function(e,n){return{restrict:"EA",scope:!0,compile:function(){var r=e["famous/core/Transform"],o=e["famous/transitions/Transitionable"],a=e["famous/transitions/Easing"];return{pre:function(e){n.ensureIsolate(e)},post:function(e,t,i){var s=n.ensureIsolate(e);setTimeout(function(){s.timeline=e.$eval(i.timeline),s._trans=new o(0),s.play=function(n){var r={duration:e.$eval(i.duration),curve:e.$eval(i.curve)||"linear"};s._trans.set(1,r,function(){n&&n(),i.loop&&setTimeout(function(){s.replay(n)},0)})},s.reset=function(){s._trans.set(0)},s.replay=function(e){s.reset(),s.play(e)};var n=null;i.event&&(n&&n(),n=e.$on(i.event,function(e,n){var r=n&&n.callback?n.callback:void 0;s.replay(r)}));i.id;if(void 0===s.timeline&&(s.timeline=s._trans.get.bind(s._trans),i.autoplay&&s.play()),!s.timeline instanceof Function)throw new Error("timeline must be a reference to a function or duration must be provided");for(var u=t[0].querySelectorAll("animate"),c={},f=0;f<u.length;f++)!function(){var n=u[f];if(n.attributes.targetmodselector){var o=angular.element(t[0].parentNode)[0].querySelectorAll(n.attributes.targetmodselector.value);angular.forEach(o,function(o){var t=angular.element(o).scope(),i=t.isolate[t.$id].modifier,u=t.isolate[t.$id].getTransform,f=n.attributes.curve&&"linear"!==n.attributes.curve.value?a[n.attributes.curve.value]:function(e){return e};if(n.attributes.field){var l=n.attributes.field.value,d=n.attributes.timelinelowerbound?parseFloat(n.attributes.timelinelowerbound.value):0,m=n.attributes.timelineupperbound?parseFloat(n.attributes.timelineupperbound.value):1;if(!n.attributes.startvalue)throw new Error("you must provide a start value for the animation");var p=e.$eval(n.attributes.startvalue.value);if(!n.attributes.endvalue)throw new Error("you must provide an end value for the animation");var v=e.$eval(n.attributes.endValue.value),g=c[t.$id]=c[t.$id]||{},h=g[l]=g[l]||[];h.push({field:l,lowerBound:d,upperBound:m,startValue:p,endValue:v,curve:f}),h.sort(function(e,n){return e.lowerBound-n.lowerBound});for(var $=1;$<h.length;$++)for(var y=h[$].lowerBound,w=0;$>w;w++)if(y<h[w].upperBound)throw new Error("Animate segments have overlappingdomains for the same field ("+l+").At any point in the timeline, only one <animate>can affect a given field on the same modifier.");var b=function(){for(var e=s.timeline()||0,n=0,r=h[n],o=0;o<h.length;o++){if(e>=h[o].lowerBound&&e<=h[o].upperBound){r=h[o];break}if(o===h.length-1){r=h[o];break}if(e>=h[o].upperBound&&e<h[o+1].lowerBound){r=h[o];break}}if(e<=r.lowerBound)return r.startValue;if(e>=r.upperBound)return r.endValue;var a=r.upperBound-r.lowerBound,t=(e-r.lowerBound)/a;if(Array.isArray(r.startValue)){for(var i=[],u=0;u<r.startValue.length;u++)i.push(r.startValue[u]+r.curve(t)*(r.endValue[u]-r.startValue[u]));return i}return r.startValue+r.curve(t)*(r.endValue-r.startValue)},S=g.transformComponents=g.transformComponents||[];"opacity"===l?i.opacityFrom(function(){return b()}):"origin"===l?i.originFrom(function(){return b()}):"size"===l?i.sizeFrom(function(){return b()}):(S.push({field:l,fn:b}),i.transformFrom(function(){for(var e={},n=u&&u()?[u()]:[],o=0;o<S.length;o++)!function(){var a=S[o].field;if(!e[a]){var t=S[o].fn();n.push(Array.isArray(t)?r[a].apply(this,t):r[a](t)),e[a]=!0}}();return 1===n.length?n[0]:r.multiply.apply(this,n)}))}})}}()},1)}}}}}]),angular.module("famous.angular").directive("faApp",["$famous","$famousDecorator",function(e,n){return{template:'<div style="display: none;"><div></div></div>',transclude:!0,scope:!0,restrict:"EA",compile:function(){return{pre:function(r,o,a){function t(){s.apply(this,arguments)}{var i=n.ensureIsolate(r),s=e["famous/core/View"],u=e["famous/core/Engine"];e["famous/core/Transform"]}o.append('<div class="famous-angular-clipping-container"><div class="famous-angular-container"></div></div>'),i.context=u.createContext(o[0].querySelector(".famous-angular-container")),window.context=i.context;var c=function(){var e=parseInt(a.faPerspective);e&&i.context.setPerspective(e)};a.$observe("faPerspective",c),c(),t.prototype=Object.create(s.prototype),t.prototype.constructor=t;i.view=new t,i.context.add(i.view),r.$on("$destroy",function(){i.context.update=angular.noop}),r.$on("registerChild",function(e,n){i.view.add(n.renderNode),e.stopPropagation()})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){angular.element(r[0].querySelectorAll("div div")[0]).append(e)}),i.readyToRender=!0}}}}}]),angular.module("famous.angular").directive("faCanvasSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,n){return{scope:!0,transclude:!0,template:'<canvas class="fa-canvas-surface"></canvas>',restrict:"EA",compile:function(){return{pre:function(r,o,a){{var t=n.ensureIsolate(r),i=e["famous/surfaces/CanvasSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}t.renderNode=new i({size:r.$eval(a.faSize)}),n.addRole("renderable",t),t.show(),a["class"]&&t.renderNode.setClasses(a["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e),s=function(){i.renderNode.setContent(r[0].querySelector("canvas.fa-canvas-surface"))};s(),t(e,function(e){angular.element(r[0].querySelectorAll("canvas.fa-canvas-surface")).append(e)}),n.registerChild(e,r,i,function(){})}}}}}]),angular.module("famous.angular").directive("faClick",["$parse","$famousDecorator",function(e,n){return{restrict:"A",compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);if(a.faClick){var i=t.renderNode._eventInput||t.renderNode;i.on("click",function(n){var o=e(a.faClick);o(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faContainerSurface",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(){return{pre:function(r,o,a){var t=n.ensureIsolate(r),i=e["famous/surfaces/ContainerSurface"],s=r.$eval(a.faOptions)||{};t.renderNode=new i(s),n.addRole("renderable",t),t.show(),n.sequenceWith(r,function(e){t.renderNode.add(e.renderGate)})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]),angular.module("famous.angular").directive("faDraggable",["$famous","$famousDecorator","$parse","$rootScope",function(e,n,r,o){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(){return{post:function(r,a,t,i,s){var u=n.ensureIsolate(r),c=e["famous/core/RenderNode"],f=e["famous/modifiers/Draggable"],l=r.$eval(t.faOptions)||{};r.$watch(function(){return r.$eval(t.faOptions)},function(e){e=e||{},u.modifier.setOptions(e)},!0),u.modifier=new f(l),u.renderNode=(new c).add(u.modifier),n.addRole("renderable",u),u.show(),n.sequenceWith(r,function(e){u.renderNode.add(e.renderGate)}),s(r,function(e){a.find("div").append(e)}),n.registerChild(r,a,u,function(){u.modifier.deactivate()}),r.$$phase||o.$$phase||r.$apply()}}}}}]),angular.module("famous.angular").directive("faEdgeSwapper",["$famous","$famousDecorator",function(e,n){return{scope:!0,restrict:"A",priority:512,compile:function(){var r=e["famous/views/EdgeSwapper"];return{pre:function(e,o,a){var t,i=n.ensureIsolate(e);i.$$animateEnterHandler=function(e,n){i.renderNode.show(t,function(){i.$$leaveDoneCallback&&i.$$leaveDoneCallback(),n.$done()})},i.$$animateLeaveHandler=function(e,n){i.$$leaveDoneCallback=n.$done};var s=e.$eval(a.faOptions);i.renderNode=new r(s),n.addRole("renderable",i),i.show(),n.sequenceWith(e,function(e){t=e.renderGate})},post:function(e,r){var o=n.ensureIsolate(e);n.registerChild(e,r,o)}}}}}]),angular.module("famous.angular").directive("faFlexibleLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(){return{pre:function(r,o,a){var t=n.ensureIsolate(r),i=e["famous/views/FlexibleLayout"],s=(e["famous/core/ViewSequence"],e["famous/core/RenderNode"],[]),u=r.$eval(a.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),e.$emit("registerChild",i)}}}}}]),angular.module("famous.angular").directive("faFlipper",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(){return{pre:function(r,o,a){var t=n.ensureIsolate(r),i=e["famous/views/Flipper"],s=r.$eval(a.faOptions)||{};t.renderNode=new i(s),n.addRole("renderable",t),t.show(),t.children=[],t.flip=function(e){t.renderNode.flip(e||r.$eval(a.faOptions))},n.sequenceWith(r,function(e){var n=t.children.length;if(0===n)t.renderNode.setFront(e.renderGate);else{if(1!==n)throw new Error("fa-flipper accepts only two child elements; more than two have been provided");t.renderNode.setBack(e.renderGate)}t.children.push(e.renderGate)},function(){t.children.splice(t.children.length-1,1)})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]),angular.module("famous.angular").directive("faGridLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(){return{pre:function(r,o,a){var t=n.ensureIsolate(r),i=e["famous/views/GridLayout"],s=(e["famous/core/ViewSequence"],[]),u=r.$eval(a.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=function(){r.$$postDigest(function(){s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))})};n.sequenceWith(r,function(e){s.push(e),c()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),c()},c)},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]),angular.module("famous.angular").directive("faHeaderFooterLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(){var r=e["famous/views/HeaderFooterLayout"],o=e["famous/core/RenderNode"];return{pre:function(e,a,t){var i=n.ensureIsolate(e),s=(new o,new o,new o,e.$eval(t.faOptions)||{});i.renderNode=new r(s),n.addRole("renderable",i),i.show();var u=0;n.sequenceWith(e,function(e){if(u++,1===u)i.renderNode.header.add(e.renderGate);else if(2===u)i.renderNode.content.add(e.renderGate);else{if(3!==u)throw new Error("fa-header-footer-layout can accept no more than 3 children");i.renderNode.footer.add(e.renderGate)}},function(){1===u?i.renderNode.header.set({}):2===u?i.renderNode.content.set({}):3===u&&i.renderNode.footer.set({}),u--})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]),angular.module("famous.angular").directive("faImageSurface",["$famous","$famousDecorator",function(e,n){return{scope:!0,template:'<div class="fa-image-surface"></div>',restrict:"EA",compile:function(){return{pre:function(r,o,a){{var t=n.ensureIsolate(r),i=e["famous/surfaces/ImageSurface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}r.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var s=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=r.$eval(a.faProperties)||{},n=["backgroundColor","color"],o=0;o<n.length;o++){var t=n[o],i=s(t);a[i]&&(e[t]=r.$eval(a[i]))}return e},t.renderNode=new i({size:r.$eval(a.faSize),"class":r.$eval(a["class"]),properties:t.getProperties()}),n.addRole("renderable",t),t.show(),a["class"]&&t.renderNode.setClasses(a["class"].split(" "))},post:function(e,r,o){var a=n.ensureIsolate(e),t=function(){a.renderNode.setContent(o.faImageUrl)};t(),o.$observe("faImageUrl",t),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faIndex",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:16,compile:function(){return{post:function(e,r,o){var a=n.ensureIsolate(e,r);a.index=e.$eval(o.faIndex),e.$watch(function(){return e.$eval(o.faIndex)},function(){a.index=e.$eval(o.faIndex),a.updateMethod&&a.updateMethod()})}}}}}]),angular.module("famous.angular").config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate","$famousDecorator","$parse","$rootElement","$famous","$timeout",function(e,n,r,o,a,t){function i(e,n,r,o){return Math.abs(e-r)<$&&Math.abs(n-o)<$}function s(e,n,r){for(var o=0;o<e.length;o+=2)if(i(e[o],e[o+1],n,r))return e.splice(o,o+2),!0;return!1}function u(e){if(!(Date.now()-l>h)){var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].clientX,o=n[0].clientY;s(d,r,o)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur())}}function c(e){var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].clientX,o=n[0].clientY;d.push(r,o),t(function(){for(var e=0;e<d.length;e+=2)if(d[e]===r&&d[e+1]===o)return void d.splice(e,e+2)},h,!1)}function f(e,n){d||(o[0].addEventListener("click",u,!0),o[0].addEventListener("touchstart",c,!0),d=[]),l=Date.now(),s(d,e,n)}{var l,d,m=e[0],p=m.compile,v=750,g=12,h=2500,$=25,y="ng-click-active";a["famous/core/Engine"]}return m.compile=function(e,n,o){return a.util.isFaElement(e)?a.util.isASurface(e)?{post:function(e,n,o){function t(){d=!1,p.removeClass(y)}var i,s,u,c,l=r(o.ngClick),d=!1,m=a.getIsolate(e),p=m.renderNode;p.on("touchstart",function(e){d=!0,i=e.target?e.target:e.srcElement,3===i.nodeType&&(i=i.parentNode),p.addClass(y),s=Date.now();var n=e.touches&&e.touches.length?e.touches:[e],r=n[0].originalEvent||n[0];u=r.clientX,c=r.clientY}),p.on("touchmove",function(){t()}),p.on("touchcancel",function(){t()}),p.on("touchend",function(e){var n=Date.now()-s,r=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],a=r[0].originalEvent||r[0],i=a.clientX,l=a.clientY,m=Math.sqrt(Math.pow(i-u,2)+Math.pow(l-c,2));d&&v>n&&g>m&&(f(i,l),angular.isDefined(o.disabled)&&"false"!==o.disabled||p.emit("click",[e])),t()}),p.on("click",function(n,r){e.$evalAsync(function(){l(e,{$event:r||n})})}),p.on("mousedown",function(){p.addClass(y)}),p.on("mousemove mouseup",function(){p.removeClass(y)})}}:void 0:p(e,n,o)},e}]),angular.forEach("dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(n){var r=window.$famousUtil.directiveNormalize("ng-"+n);e.decorator(r+"Directive",["$delegate","$famousDecorator","$parse","$famous",function(e,o,a,t){var i=e[0],s=i.compile;return i.compile=function(e,i,u){return t.util.isFaElement(e)?{post:function(e,t,i){var s=o.ensureIsolate(e);if(i[r]){var u=s.renderNode._eventInput||s.renderNode;u.on(n,function(n){var o=a(i[r]);o(e,{$event:n}),e.$$phase||e.$apply()})}}}:s(e,i,u)},e}])})}]),angular.module("famous.angular").directive("faModifier",["$famous","$famousDecorator","$parse","$rootScope",function(e,n,r,o){return{template:"<div></div>",transclude:!0,restrict:"EA",priority:2,scope:!0,compile:function(){return{post:function(a,t,i,s,u){var c=n.ensureIsolate(a),f=e["famous/core/RenderNode"],l=e["famous/core/Modifier"],d=e["famous/core/Transform"],m=e["famous/physics/bodies/Particle"],p=function(e){return e.getPosition()},v=["aboutOrigin","perspective","rotate","rotateAxis","rotateX","rotateY","rotateZ","scale","skew","translate"];i.$observe("faTransformOrder",function(){var e=a.$eval(i.faTransformOrder);void 0!==e&&(v=e)});var g={};angular.forEach(v,function(n){var o=e.util.directiveNormalize("fa-"+n);i.$observe(o,function(){g[n]=r(i[o])})});var h=angular.noop;i.$observe("faTransform",function(){h=r(i.faTransform)}),c.getTransform=function(){var e=h(a);if(void 0!==e)return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e;var n=[];return angular.forEach(v,function(e){var r=g[e]?g[e](a):void 0;void 0!==r&&(r instanceof Function&&(r=r()),n.push(r instanceof Array?d[e].apply(this,r):r instanceof m?d[e].apply(this,p(r)):d[e].call(this,r)))}),n.length?1===n.length?n[0]:n.reduce(d.multiply):void 0};var $=angular.noop;i.$observe("faAlign",function(){$=r(i.faAlign)}),c.getAlign=function(){var e=$(a);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof m?p(e):e};var y=angular.noop;i.$observe("faOpacity",function(){y=r(i.faOpacity)}),c.getOpacity=function(){var e=y(a);return void 0===e?1:e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof m?p(e):e};var w=angular.noop;i.$observe("faSize",function(){w=r(i.faSize)}),c.getSize=function(){var e=w(a);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof m?p(e):e};var b=angular.noop;i.$observe("faProportions",function(){b=r(i.faProportions)}),c.getProportions=function(){var e=b(a);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof m?p(e):e};var S=angular.noop;i.$observe("faOrigin",function(){S=r(i.faOrigin)}),c.getOrigin=function(){var e=S(a);return e instanceof Function?e():e instanceof Object&&void 0!==e.get?e.get():e instanceof m?p(e):e},c.modifier=new l({transform:c.getTransform,size:c.getSize,proportions:c.getProportions,opacity:c.getOpacity,origin:c.getOrigin,align:c.getAlign}),c.renderNode=(new f).add(c.modifier),n.addRole("renderable",c),c.show(),n.sequenceWith(a,function(e){c.renderNode.add(e.renderGate)}),u(a,function(e){t.find("div").append(e)}),n.registerChild(a,t,c,function(){c.modifier.setOpacity(0)}),a.$$phase||o.$$phase||a.$apply()}}}}}]),angular.module("famous.angular").directive("faMouseover",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);if(a.faMouseover){var i=t.renderNode._eventInput||t.renderNode;i.on("mouseover",function(n){var o=e(a.faMouseover);o(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faOptions",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,priority:-16,compile:function(){return{post:function(e,r,o){var a=n.ensureIsolate(e,r);e.$watch(function(){return e.$eval(o.faOptions)},function(){if(a.renderNode.setOptions)a.renderNode.setOptions(e.$eval(o.faOptions));else{if(!a.modifier||!a.modifier.setOptions)throw new Error("fa-options is not supported on "+r[0].tagName);a.modifier.setOptions(e.$eval(o.faOptions))}},!0)}}}}}]),angular.module("famous.angular").directive("faPipeFrom",["$famous","$famousDecorator","$famousPipe",function(e,n,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var o=e["famous/core/Engine"];return{post:function(e,a,t){var i=n.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeFrom)},function(e,n){var a;a=i.renderNode&&i.renderNode._isModifier?i.renderNode._object:i.renderNode?i.renderNode._eventInput||i.renderNode:o,r.unpipesFromTargets(a,n),r.pipesToTargets(a,e)}),e.$on("$destroy",function(){r.unpipesFromTargets(i.renderNode||o,e.$eval(t.faPipeFrom))
})}}}}}]),angular.module("famous.angular").directive("faPipeTo",["$famous","$famousDecorator","$famousPipe",function(e,n,r){return{restrict:"A",scope:!1,priority:16,compile:function(){var o=e["famous/core/Engine"];return{post:function(e,a,t){var i=n.ensureIsolate(e);e.$watch(function(){return e.$eval(t.faPipeTo)},function(e,n){var a;a=i.renderNode&&i.renderNode._isModifier?i.renderNode._object:i.renderNode?i.renderNode._eventOutput||i.renderNode:o,r.unpipesFromTargets(n,a),r.pipesToTargets(e,a)}),e.$on("$destroy",function(){r.unpipesFromTargets(e.$eval(t.faPipeTo),i.renderNode||o)})}}}}}]),angular.module("famous.angular").directive("faRenderNode",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(){return{pre:function(r,o,a){{var t=n.ensureIsolate(r),i=e["famous/core/Engine"];e["famous/core/RenderNode"]}t.children=[],a.$observe("faPipeTo",function(e){var n=r.$eval(e);n&&i.pipe(n)}),t.renderNode=r.$eval(a.faNode),n.addRole("renderable",t),t.show(),n.sequenceWith(r,function(e){t.renderNode.add(e.renderGate),t.children.push(e)})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]),angular.module("famous.angular").directive("faScrollView",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(){return{pre:function(r,o,a){var t=n.ensureIsolate(r),i=e["famous/views/Scrollview"],s=e["famous/core/ViewSequence"],u=(e["famous/core/Surface"],[]),c=r.$eval(a.faOptions)||{};t.renderNode=new i(c),n.addRole("renderable",t),t.show();var f=!1,l=function(e){f!==!0&&(r.$$postDigest(function(){f=!1,u.sort(function(e,n){return e.index-n.index});var n={array:function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(u)};e&&(n.index=r.$eval(a.faStartIndex));var o=new s(n);t.renderNode.sequenceFrom(o)}),f=!0)};n.sequenceWith(r,function(e){u.push(e),l(!0)},function(e){u=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(u),l()},l)},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]),angular.module("famous.angular").directive("faSequentialLayout",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",restrict:"E",transclude:!0,scope:!0,compile:function(){return window.$f=e,{pre:function(r,o,a){var t=n.ensureIsolate(r),i=e["famous/views/SequentialLayout"],s=[],u=r.$eval(a.faOptions)||{};t.renderNode=new i(u),n.addRole("renderable",t),t.show();var c=!1,f=function(){c!==!0&&(r.$$postDigest(function(){c=!1,s.sort(function(e,n){return e.index-n.index}),t.renderNode.sequenceFrom(function(e){var n=[];return angular.forEach(e,function(e,r){n[r]=e.renderGate}),n}(s))}),c=!0)};n.sequenceWith(r,function(e){s.push(e),f()},function(e){s=function(n){var r=[];return angular.forEach(n,function(n){n.id!==e&&r.push(n)}),r}(s),f()})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]),angular.module("famous.angular").directive("faSurface",["$famous","$famousDecorator","$interpolate","$controller","$compile",function(e,n){return{scope:!0,transclude:!0,template:'<div class="fa-surface"></div>',restrict:"EA",compile:function(){return{pre:function(r,o,a){{var t=n.ensureIsolate(r),i=e["famous/core/Surface"];e["famous/core/Transform"],e["famous/core/EventHandler"]}r.$watch(function(){return t.getProperties()},function(){t.renderNode&&t.renderNode.setProperties(t.getProperties())},!0);var s=function(e){return"fa"+e.charAt(0).toUpperCase()+e.slice(1)};t.getProperties=function(){for(var e=r.$eval(a.faProperties)||{},n=["backgroundColor","margin","padding","color","pointerEvents","zIndex"],o=0;o<n.length;o++){var t=n[o],i=s(t);a[i]&&(e[t]=r.$eval(a[i]))}return e};var u=[];a.$observe("faSize",function(){t.renderNode.setSize(r.$eval(a.faSize)),u.push(new Date),u.length>5&&(u[4]-u[0]<=1e3&&console.warn("Using fa-size on fa-surface to animate is significantly non-performant, prefer to use fa-size on an fa-modifier surrounding a fa-surface"),u.shift())}),t.renderNode=new i({size:r.$eval(a.faSize),properties:t.getProperties()}),n.addRole("renderable",t),t.show(),a["class"]&&t.renderNode.setClasses(a["class"].split(" ")),a.faDeploy&&t.renderNode.on("deploy",function(){var e=r[a.faDeploy];"function"==typeof e&&e(a.faDeploy)()}),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e),s=function(){i.renderNode.setContent(r[0].querySelector("div.fa-surface"))};s(),t(e,function(e){angular.element(r[0].querySelectorAll("div.fa-surface")).append(e)}),n.registerChild(e,r,i,function(){})}}}}}]),angular.module("famous.angular").directive("faTap",["$parse","$famousDecorator",function(e,n){return{restrict:"A",compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);if(a.faTap){var i=t.renderNode._eventInput||t.renderNode,s=!1;i.on("touchmove",function(e){return s=!0,e}),i.on("tap",function(n){if(!s){var o=e(a.faTap);o(r,{$event:n}),r.$$phase||r.$apply()}s=!1})}}}}}}]),angular.module("famous.angular").directive("faTouchend",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);if(a.faTouchend){var i=t.renderNode._eventInput||t.renderNode;i.on("touchend",function(n){var o=e(a.faTouchend);o(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchmove",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);if(a.faTouchmove){var i=t.renderNode._eventInput||t.renderNode;i.on("touchmove",function(n){var o=e(a.faTouchmove);o(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faTouchstart",["$parse","$famousDecorator",function(e,n){return{restrict:"A",scope:!1,compile:function(){return{post:function(r,o,a){var t=n.ensureIsolate(r);if(a.faTouchstart){var i=t.renderNode._eventInput||t.renderNode;i.on("touchstart",function(n){var o=e(a.faTouchstart);o(r,{$event:n}),r.$$phase||r.$apply()})}}}}}}]),angular.module("famous.angular").directive("faVideoSurface",["$famous","$famousDecorator",function(e,n){return{scope:!0,transclude:!0,template:'<div class="fa-video-surface"></div>',restrict:"EA",compile:function(){return{pre:function(r,o,a){var t=n.ensureIsolate(r),i=e["famous/surfaces/VideoSurface"];r.$watch(function(){return r.$eval(a.faOptions)},function(e,n){t.renderNode.setOptions(n)},!0),t.renderNode=new i({"class":r.$eval(a["class"])}),n.addRole("renderable",t),t.show(),a["class"]&&t.renderNode.setClasses(a["class"].split(" ")),n.sequenceWith(r,function(){throw new Error("Surfaces are leaf nodes of the Famo.us render tree and cannot accept rendernode children.  To include additional Famo.us content inside of a fa-surface, that content must be enclosed in an additional fa-app.")})},post:function(e,r,o){var a=n.ensureIsolate(e),t=function(){a.renderNode.setContent(o.faVideoUrl)};t(),o.$observe("faVideoUrl",t),n.registerChild(e,r,a)}}}}}]),angular.module("famous.angular").directive("faView",["$famous","$famousDecorator",function(e,n){return{template:"<div></div>",transclude:!0,scope:!0,restrict:"EA",compile:function(){var r=e["famous/core/View"];return{pre:function(e,o,a){var t=n.ensureIsolate(e);t.children=[],t.renderNode=new r({size:e.$eval(a.faSize)||[void 0,void 0]}),n.addRole("renderable",t),t.show(),n.sequenceWith(e,function(e){t.renderNode.add(e.renderGate),t.children.push(e)})},post:function(e,r,o,a,t){var i=n.ensureIsolate(e);t(e,function(e){r.find("div").append(e)}),n.registerChild(e,r,i)}}}}}]);